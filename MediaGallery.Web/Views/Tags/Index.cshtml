@using System.Text.Json
@{
    ViewData["Title"] = "Tags";
    var tags = new[]
    {
        new { tag = "architecture", total = 128, highlight = new { type = "photo", filePath = "photos/arch-highlight.jpg", width = 1600, height = 900, isAccessible = true }, topScore = 0.98 },
        new { tag = "night", total = 64, highlight = new { type = "photo", filePath = "photos/night-highlight.jpg", width = 1600, height = 900, isAccessible = true }, topScore = 0.87 },
        new { tag = "timelapse", total = 22, highlight = new { type = "video", filePath = "videos/timelapse-highlight.mp4", width = 1920, height = 1080, isAccessible = true }, topScore = 0.92 }
    };
}

<section class="page-header">
    <h1>@ViewData["Title"]</h1>
    <p class="lead">Pick a tag to drill deeper into related photos and videos.</p>
</section>

<section class="tag-browser" data-tag-view="index" data-media-root="@Url.Content("~/media/")">
    <div class="tag-browser__list" data-tag-list aria-label="Available tags">
        @foreach (var tag in tags)
        {
            <article class="tag-card" data-tag="@tag.tag">
                <h2>@tag.tag</h2>
                <p>@tag.total items</p>
                <button class="btn" type="button" data-action="preview-tag" data-tag="@tag.tag">Preview</button>
                <a class="btn btn-link" asp-controller="Tags" asp-action="Detail" asp-route-tag="@tag.tag">Open detail</a>
            </article>
        }
    </div>

    <aside class="tag-browser__preview" aria-live="polite">
        <h2 class="tag-browser__preview-title" data-preview-title>Preview</h2>
        <div class="media-gallery-grid" data-preview-gallery></div>
        <div class="scroll-status" data-scroll-status aria-live="polite"></div>
    </aside>
</section>

<script type="application/json" id="tag-index-data">
    @Html.Raw(JsonSerializer.Serialize(tags))
</script>

@section Scripts {
    <script type="module" src="~/js/tagGallery.js" asp-append-version="true"></script>
}
